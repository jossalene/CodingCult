---
title: "Titanic"
author: "Hanh Nguyen"
date: "4/7/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
Load Titanic
```{r}
library(tidyverse)
titanic_raw <- read.csv("C:/Users/Jo/Desktop/CodingCult/practice-repo/titanic.csv")
titanic_raw
titanic <- titanic_raw %>% rename(Gender = Sex, Class = Pclass)
titanic
```
___________________
GENERAL INFORMATION
___________________
The dataset has 10 variables and 887 observations, each observation represents a passenger on the Titanic.
The 10 variables:
- Survived: 0 for not survived, 1 for survived
- Class: 1st, 2nd, and 3rd
- Name: passenger name
- Sex: male and female
- Age
- Siblings.Spouses.Aboard: number of siblings & spouses of the passenger who were also on board
- Parents.Children.Aboard: number of parents & children of the passenger who were also on board
- Fare: The cost of the fare that the passenger paid

_________________
AT A FIRST GLANCE
_________________
Purpose: to see basic data and calculation
```{r}
#Unsurvived Passenger
titanic %>% filter(Survived == 0)
#Survived Passenger
survived <- titanic %>% filter(Survived == 1)
#Children on the Titanic
children <- titanic %>% filter(Age < 13)
children
#Teens on the Titanic
teens <- titanic %>% filter(Age >= 13 & Age < 19)
teens
#Young aldults on the Titanic
y_adult <- titanic %>% filter(Age > 18 & Age < 40)
y_adult
#Middle-age adults on the Titanic
mid_adult <- titanic %>% filter(Age >= 40 & Age < 65)
mid_adult
#Elderly on the Titanic
elderly <- titanic %>% filter(Age >= 65)
elderly
```
There is a total of 545 unsurvived passengers and 342 survived passengers.

There were 79 children (0~12yo), 87 teens (13~18yo), 525 young adults (19~39yo), 183 middle-aged adults (41~64yo) and 13 elderly (65yo or above)


_________________
GENDER & SURVIVAL
_________________
Purpose: to see if there is a relationship between gender and survival.

```{r}
#number of female passenger
total_female <- titanic %>% summarise(sum(Gender == "female"))
total_female
#number of male passeger
total_male <- titanic %>% summarise(sum(Gender == "male"))
total_male
#number of survived female passenger
survived_female <- titanic %>% count(Gender == "female" & Survived == 1)
survived_female
#number of unsurvived female passenger
unsurvived_female <- titanic %>% count(Gender == "female" & Survived == 0)
unsurvived_female
#number of survived male passenger
survived_male <- titanic %>% count(Gender == "male" & Survived == 1)
survived_male
#number of unsurvived male passenger
unsurvived_male <- titanic %>% count(Gender == "male" & Survived == 0)
unsurvived_male
#gender and survival plot
titanic %>%
  ggplot(aes(x = Gender, y = Survived)) + geom_col(width = 0.2) +
  labs(title = "Gender and Survival on the Titanic")
```
*Conclusion*
Female passengers had a significant higher chance of survival than male passengers.
This makes sense because during the Titanic crash, women were prioritized to get on the rescue boat.

______________
AGE & SURVIVAL
______________
Purpose: to see if there is a relationship between the passenger's age and their chance of survival.

```{r}
#age-survival
titanic %>%
  ggplot(aes(x = Age)) + geom_histogram() + facet_wrap(~Survived)
#age with highest death in descending order
unsurvived_age <- titanic %>% group_by(Age) %>% filter(Survived == 0) %>% count(Age) %>% arrange(desc(n))
unsurvived_age
#plot of unsurvived age
ggplot(unsurvived_age, aes(x = Age, y = n)) + geom_line() + geom_smooth() + labs(title = "Plot of Age and Unsurvival")
#age with hight survival in descending order
survived_age <- titanic %>% group_by(Age) %>% filter(Survived == 1) %>% count(Age) %>% arrange(desc(n))
survived_age
#plot of survived age
ggplot(survived_age, aes(x = Age, y = n)) + geom_line() + geom_smooth() + labs(title = "Plot of Age and Survival")
#survived children
nSchildren <- children %>% count(Survived == 1)
nSchildren
#unsurvived children
children %>% count(Survived == 0)
# survived teens
nSteens <- teens %>% count(Survived == 1)
nSteens
#unsurvived teens
teens %>% count(Survived == 0)
#survived young adults
nSyAdults <- y_adult %>% count(Survived == 1)
nSyAdults
# unsurvived young adults
y_adult %>% count(Survived == 0)
#survived middle-aged adults
nSmAdults <- mid_adult %>% count(Survived == 1)
nSmAdults
#unsurvived middle_aged adults
mid_adult %>% count(Survived == 0)
#survived elderly
nSelderly <- elderly %>% count(Survived == 1)
nSelderly
#unsurvived elderly
elderly %>% count(Survived == 0)
#the only one elderly that was survived
elderly %>% filter(Survived == 1)
elderly %>% filter(Age == 80)
```
*Conclusion*
A large number of people, who were unable to survive the crash, came from different age range.
The age that had the highest number of unsurvived passengers were 21 years with 28 counts.
The age that had the highest number of survived passenger were 24 years with 18 counts.
Out of 79 children, there are 43 survived children, and 36 unsurvived children.
Out of 87 teens, there are 35 survived teens, and 52 unsurvived teens.
Out of 526, there are 192 survived young adults, and 333 unsurvived young adults.
Out of 183 middle-aged adults, there are 71 survived middle-aged adults, and 112 unsurvived middle-aged adults.
Out of 13 elderly, there is *only 1* of them survived. The survived passenger is Algernon Henry Wilson Barkworth, male, 80yo, *first class*. He is also the *oldest* elderly on the Titanic ukg\.


________________
CLASS & SURVIVAL
________________
Purpose: to see if class and survival has any relationship with each other.
```{r}
#plot survived passenger and boarding class on the Titanic
ggplot(survived, aes(x = Class, y= Survived)) + geom_col(width = 0.5) + labs(title = "Boarding Class and Survival on the Titanic")
#number of survived passenger by boarding class
survived %>% count(Class)
```
First class has the highest number of survived passengers (136) while Second Class has the lowest number of survived passengers(87). The Third Class, on the other hand, has 119 survived passengers.

______________________
AGE - CLASS - SURVIVAL
______________________
Purpose: to see how age in different boarding class affect survival
```{r}
#survived chidren in First Class
titanic %>% filter(Class == 1 & Survived == 1) %>% count(Age < 13)
#survived children in Second Class
titanic %>% filter(Class == 2 & Survived == 1) %>% count(Age < 13)
#survived children in Third Class
titanic %>% filter(Class == 3 & Survived == 1) %>% count(Age < 13)
```
On the First Class: 
    - There are 3 children survived
On the Second Class:
    - There are 17 children survived
On the Third Class:
    - There are 23 children survived
